change: check parent count, fixed empty repo bug

todo: solve todo notes in code
